<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>Requirements for transclusion in DocBook</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2023-01-01T19:59:33Z"/><meta name="dc.created" content="2010-12-09"/><meta name="generator" content="DocBook xslTNG version 1.11.1 / SNAPSHOT / SAXON HE 11.4"/><link href="./css/docbook.css" rel="stylesheet" media="screen"/><link href="./css/docbook-paged.css" rel="stylesheet" media="print"/></head><body class="home"><nav class="top"></nav><main><article id="transclusion-requirements" class="article component"><header><h1>Requirements for transclusion in DocBook</h1><div class="authorgroup"><div class="author"><h3><span class="first-last personname"><span class="firstname">Jirka</span> <span class="surname">Kosek</span></span></h3></div></div><p class="pubdate"><time class="pubdate" datetime="2010-12-09">09 Dec 2010</time></p></header><div class="list-of-titles"><div class="lot toc"><div class="title">Table of Contents</div><ul class="toc"><li><a href="#uc-1"><span class="number">1<span class="sep"> </span></span>UC-1: Shared strings</a><ul class="toc"><li><a href="#uc-1_s1"><span class="number">1<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</a><ul class="toc"><li><a href="#uc-1_s1_s1"><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Entities</a></li><li><a href="#uc-1_s1_s2"><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep"> </span></span>XInclude</a></li></ul></li></ul></li><li><a href="#uc-2"><span class="number">2<span class="sep"> </span></span>UC-2: Shared strings in attribute values</a><ul class="toc"><li><a href="#uc-2_s1"><span class="number">2<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</a><ul class="toc"><li><a href="#uc-2_s1_s1"><span class="number">2<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Entities</a></li></ul></li></ul></li><li><a href="#uc-3"><span class="number">3<span class="sep"> </span></span>UC-3: Conditional shared text</a><ul class="toc"><li><a href="#uc-3_s1"><span class="number">3<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</a><ul class="toc"><li><a href="#uc-3_s1_s1"><span class="number">3<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Conditional sections</a></li><li><a href="#uc-3_s1_s2"><span class="number">3<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep"> </span></span>XInclude and profiling</a></li></ul></li></ul></li><li><a href="#uc-4"><span class="number">4<span class="sep"> </span></span>UC-4: Modularized documents</a><ul class="toc"><li><a href="#uc-4_s1"><span class="number">4<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</a><ul class="toc"><li><a href="#uc-4_s1_s1"><span class="number">4<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Entities</a></li><li><a href="#uc-4_s1_s2"><span class="number">4<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep"> </span></span>XInclude</a></li></ul></li></ul></li><li><a href="#uc-5"><span class="number">5<span class="sep"> </span></span>UC-5: Repeated transclusion in one <q>master</q> document</a><ul class="toc"><li><a href="#uc-5_s1"><span class="number">5<span class="sep">.</span>1<span class="sep"> </span></span>Current solution</a></li></ul></li><li><a href="#uc-6"><span class="number">6<span class="sep"> </span></span>UC-6: Transclusion of foreign content</a><ul class="toc"><li><a href="#uc-6_s1"><span class="number">6<span class="sep">.</span>1<span class="sep"> </span></span>Current solution</a></li></ul></li><li><a href="#evaluation"><span class="number">7<span class="sep"> </span></span>Evaluation of current technologies</a></li></ul></div></div><p>This document summarizes uses-cases for transclusion of content
in DocBook documents. This document should help DocBook TC in deciding
whether existing standards like XInclude are sufficient for the task
or whether DocBook specific mechanism should be designed.</p><div class="admonition note"><div><div class="icon">ⓘ</div><div class="body"><header><div class="title">Note</div></header><div><p>DocBook TC has not yet decided whether DocBook specific
mechanism is really required or not. But draft proposal of such transclusion
mechanism is available at <a href="https://docbook.org/docs/transclusion/" class="link">https://docbook.org/docs/transclusion/</a>.</p></div></div></div></div><section id="uc-1" class="section"><header><h2><span class="number">1<span class="sep"> </span></span>UC-1: Shared strings</h2></header><p>Many technical publication use repeating boilerplate text for
things like product names or product versions. It is useful if such
text is defined only once per document (or set of documents) and then
just referenced. This approach prevents typos and makes updates and
rebranding of content very easy.</p><section id="uc-1_s1" class="section"><header><h3><span class="number">1<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</h3></header><section id="uc-1_s1_s1" class="section"><header><h4><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Entities</h4></header><p>This use-case can be solved by using <a href="https://www.w3.org/TR/REC-xml/#sec-internal-ent" class="link">internal
entities</a>. This is well supported in processing tools and to
some extent in authoring tools. However entities are somewhat hard to
maintain when you use modular documents at the same time. Also
entities and their references are not part of XDM so they do not
survive XSLT processing which makes various <q>document
massaging</q> tasks challenging.</p><div id="uc-1_s1_s1_ex1" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="7"><pre class="language- long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>&lt;!ENTITY product-version "3.14"&gt;</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>&lt;!ENTITY product-name "FooWiz"&gt;</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>&lt;!ENTITY corp-name "ACME Inc."&gt;</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>&lt;para&gt;The latest version of &lt;application&gt;&amp;product-name;&lt;/application&gt;</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>from &amp;corp-name; is &amp;product-version;.&lt;/para&gt;</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Using entities for shared strings</div></header></div></section><section id="uc-1_s1_s2" class="section"><header><h4><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep"> </span></span>XInclude</h4></header><p><a href="https://www.w3.org/TR/xinclude/" class="link">XInclude</a>
when combined with proper XPointer schema can be used for transclusion
of single element or even only its text content. In this setup there
can be separate file with definition of shared texts which are then
reused in other documents.</p><div id="uc-1_s1_s2_ex1" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="6"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>&lt;article xmlns="http://docbook.org/ns/docbook" version="5.0"&gt;</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &lt;title&gt;Shared texts&lt;/title&gt;</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &lt;para&gt;&lt;phrase xml:id="product-version"&gt;3.14&lt;/phrase&gt;&lt;/para&gt;</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &lt;para&gt;&lt;phrase xml:id="product-name"&gt;FooWiz&lt;/phrase&gt;&lt;/para&gt;</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>  &lt;para&gt;&lt;phrase xml:id="corp-name"&gt;ACME Inc.&lt;/phrase&gt;&lt;/para&gt;</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>&lt;/article&gt;</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep">.</span>1<span class="sep"> </span></span>Definition file for further XInclude referencing</div></header></div><p>The problem is that support for different XPointer schemes
varies between implementations. Almost all implementations support
referencing to element specified by its ID as shown in the following
example.</p><div id="uc-1_s1_s2_ex2" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="6"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>&lt;… xmlns:xi="http://www.w3.org/2001/XInclude"&gt;</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &lt;para&gt;The latest version of &lt;application&gt;&lt;xi:include href="shared-texts.xml" xpointer="product-name"/&gt;&lt;/application&gt;</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>    from &lt;xi:include href="shared-texts.xml" xpointer="corp-name"/&gt;</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>    is &lt;xi:include href="shared-texts.xml" xpointer="product-version"/&gt;.&lt;/para&gt;</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep">.</span>2<span class="sep"> </span></span>Using XIncludes for shared texts</div></header></div><p>This solution has two problems. The actual reference to shared
texts is very verbose because each <code class="tag tag-element">xi:include</code>
element contains reference to the file with shared text
definitions. Second problem is that such reference doesn't include
only text of referenced element but whole element including <code class="tag tag-attribute">xml:id</code> attribute. This leads to excessive
markup and duplicated IDs in the composed document.</p><p>Solution is to use more advanced XPointer scheme. This leads to
the more arcane markup, support in tools is very bad, but there are no
duplicated IDs and excessive markup.</p><div id="uc-1_s1_s2_ex3" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="6"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>&lt;… xmlns:xi="http://www.w3.org/2001/XInclude"&gt;</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &lt;para&gt;The latest version of &lt;application&gt;&lt;xi:include href="shared-texts.xml" xpointer="xpath(id('product-name')/text())"/&gt;&lt;/application&gt;</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>    from &lt;xi:include href="shared-texts.xml" xpointer="xpath(id('corp-name')/text())"/&gt;</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>    is &lt;xi:include href="shared-texts.xml" xpointer="xpath(id('product-version')/text())"/&gt;.&lt;/para&gt;</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">1<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep">.</span>3<span class="sep"> </span></span>Using XIncludes for shared texts without duplicating
source elements</div></header></div></section></section></section><section id="uc-2" class="section"><header><h2><span class="number">2<span class="sep"> </span></span>UC-2: Shared strings in attribute values</h2></header><p>This use-cases is similar to <a href="#uc-1" class="xref xref-section">UC-1</a>. The only
difference now is that shared text can appear in an attribute
value. This is not very common requirement for DocBook document, but
because of differences between element and attribute values in XML
separate use-cases is created.</p><section id="uc-2_s1" class="section"><header><h3><span class="number">2<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</h3></header><section id="uc-2_s1_s1" class="section"><header><h4><span class="number">2<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Entities</h4></header><p>This use-case can be solved only by using <a href="https://www.w3.org/TR/REC-xml/#sec-internal-ent" class="link">internal
entities</a>. This is well supported in processing tools and to
some extent in authoring tools.</p><div id="uc-2_s1_s1_ex1" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="5"><pre class="language- long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>&lt;!ENTITY product-version "3.14"&gt;</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>&lt;!ENTITY product-name "FooWiz"&gt;</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>&lt;section xreflabel="Installation of &amp;product-name; &amp;product-version;"&gt;</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">2<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Using entities for shared strings in attribute values</div></header></div></section></section></section><section id="uc-3" class="section"><header><h2><span class="number">3<span class="sep"> </span></span>UC-3: Conditional shared text</h2></header><p>Some documents use conditional content. Shared text then can be
also subject to conditional processing.</p><section id="uc-3_s1" class="section"><header><h3><span class="number">3<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</h3></header><section id="uc-3_s1_s1" class="section"><header><h4><span class="number">3<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Conditional sections</h4></header><p>This use-case can be solved by using <a href="https://www.w3.org/TR/REC-xml/#sec-condition-sect" class="link">conditional
sections</a> which can enclose entity definitions.</p></section><section id="uc-3_s1_s2" class="section"><header><h4><span class="number">3<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep"> </span></span>XInclude and profiling</h4></header><p>As typical XInclude scenarios include complete elements not just
their content, it is possible to define several parallel elements
with different profiling attributes set, enclose them with another
element and then do inclusion.</p><div id="uc-3_s1_s2_ex1" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="8"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code>&lt;article xmlns="http://docbook.org/ns/docbook" version="5.0"&gt;</code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &lt;title&gt;Shared texts&lt;/title&gt;</code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  …</code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  &lt;para&gt;&lt;phrase xml:id="product-name"&gt;&lt;phrase os="win"&gt;Windows</code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code>        Protector&lt;/phrase&gt;&lt;phrase os="linux"&gt;Linux</code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>        Protector&lt;/phrase&gt;&lt;/phrase&gt;&lt;/para&gt;</code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>  …</code></span></span>
<span class="line" db-line="8"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>&lt;/article&gt;</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">3<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep">.</span>1<span class="sep"> </span></span>Definition file for further XInclude referencing with
conditional text</div></header></div></section></section></section><section id="uc-4" class="section"><header><h2><span class="number">4<span class="sep"> </span></span>UC-4: Modularized documents</h2></header><p>For large documents it is often impractical to edit them as
a single large XML file. It is practical to split large document
(e.g. book) into few smaller ones (e.g. chapters) and just include
them into <q>master</q> document. This approach is also useful
for reusing of boilerplate texts like legalnotices.</p><section id="uc-4_s1" class="section"><header><h3><span class="number">4<span class="sep">.</span>1<span class="sep"> </span></span>Current solutions</h3></header><section id="uc-4_s1_s1" class="section"><header><h4><span class="number">4<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Entities</h4></header><p>This use-case can be solved by using <a href="https://www.w3.org/TR/REC-xml/#sec-external-ent" class="link">external
entities</a>. This is well supported in processing tools and to
some extent in authoring tools. Also
entities and their references are not part of XDM so they do not
survive XSLT processing which makes various <q>document
massaging</q> task challenging. External entities doesn't work
very well if there are multiple levels of inclusions as entities can
be declared only in the <q>main</q> document.</p><div id="uc-4_s1_s1_ex1" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="14"><pre class="language- long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>&lt;!ENTITY chapter1 SYSTEM "chapter1.xml"&gt;</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>&lt;!ENTITY chapter2 SYSTEM "chapter2.xml"&gt;</code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>…</code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code>&lt;book …&gt;</code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;info&gt;</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    &lt;title&gt;A Book&lt;/title&gt;</code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;/info&gt;</code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  </code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code>  &amp;chapter1;</code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &amp;chapter2;</code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;index/&gt;</code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>&lt;/book&gt;</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">4<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep">.</span>1<span class="sep"> </span></span>Using entities for modularized documents</div></header></div></section><section id="uc-4_s1_s2" class="section"><header><h4><span class="number">4<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep"> </span></span>XInclude</h4></header><p><a href="https://www.w3.org/TR/xinclude/" class="link">XInclude</a>
works very well for this use-case.</p><div id="uc-4_s1_s2_ex1" class="example formalobject"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="10"><pre class="language-none long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>&lt;book … xmlns:xi="http://www.w3.org/2001/XInclude"&gt;</code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;info&gt;</code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    &lt;title&gt;A Book&lt;/title&gt;</code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;/info&gt;</code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code>  </code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;xi:include href="chapter1.xml"/&gt;</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;xi:include href="chapter2.xml"/&gt;</code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>  &lt;index/&gt;</code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code>&lt;/book&gt;</code></span></span>
</pre></div><header><div class="title"><span class="label">Example<span class="sep"> </span></span><span class="number">4<span class="sep">.</span>1<span class="sep">.</span>2<span class="sep">.</span>1<span class="sep"> </span></span>Using XIncludes for modularized documents</div></header></div></section></section></section><section id="uc-5" class="section"><header><h2><span class="number">5<span class="sep"> </span></span>UC-5: Repeated transclusion in one <q>master</q> document</h2></header><p>Some types of documentation are highly modular and composed from large
number of small units. These units can be whole chapters, smaller
self-standing units like section or topic, or it can be quite small
chunk of content like admonition. If each such unit is used only once
in document then there is no problem and we are working only with highly
modular document (see <a href="#uc-4" class="xref xref-section">UC-4</a>). But if one unit is
included more then once then we can face several problems.</p><p>If elements in units have assigned unique IDs (by using <code class="tag tag-attribute">xml:id</code> attribute) then resulting document
after transclusion contains duplicate IDs. This makes file technically
invalid and processing tools have difficulties in interpreting
cross-references found in document.</p><p>There are different strategies which can be used to managed
units and IDs which are transcluded more then once:</p><ul class="itemizedlist"><li><p>Do nothing. This of course doesn't solve problem and
result of processing is unpredictable.</p></li><li><p>Preserve duplicated IDs only on their first occurrence
(in document order). Other then first occurrences of ID are
deleted. All links will then point to the first location in final
composed document.</p></li><li><p>Make each ID unique within transcluded unit (for
example by prepending unit specific prefix to each ID). In this cases
targets of all cross-references have to be adjusted. Several
adjustment strategies are possible – link to the first occurrence,
link to the <q>closest occurrence</q> (e.g. find minimum
subtree rooted at ancestors that contains link
target).</p></li></ul><section id="uc-5_s1" class="section"><header><h3><span class="number">5<span class="sep">.</span>1<span class="sep"> </span></span>Current solution</h3></header><p>Unfortunately there is no satisfying solution to this
use-case. DocBook XSL stylesheet can be customized to link only to the
first occurrence of ID (see <a href="http://www.sagehill.net/docbookxsl/DuplicateIDs.html" class="link">http://www.sagehill.net/docbookxsl/DuplicateIDs.html</a>).</p></section></section><section id="uc-6" class="section"><header><h2><span class="number">6<span class="sep"> </span></span>UC-6: Transclusion of foreign content</h2></header><p>Sometimes it is necessary to include foreign content into
DocBook document. Examples of such foreign content are:</p><ul class="itemizedlist"><li><p>listing of program source;</p></li><li><p>content in different vocabulary like DITA or TEI which has
to be transformed into DocBook prior transclusion.</p></li></ul><section id="uc-6_s1" class="section"><header><h3><span class="number">6<span class="sep">.</span>1<span class="sep"> </span></span>Current solution</h3></header><p>Text files with programlistings can be transcluded by DocBook
<code class="tag tag-element">textdata</code> element or using <code>parse="text"</code>
functionality of XInclude. There is no standardized way of
transclusion of different vocabularies. Currently this has to be solved on
application level.</p></section></section><section id="evaluation" class="section"><header><h2><span class="number">7<span class="sep"> </span></span>Evaluation of current technologies</h2></header><p>It is evident that the existing technologies are not able to
handle use-cases <a href="#uc-5" class="xref xref-section">UC-5</a> and <a href="#uc-6" class="xref xref-section">UC-6</a>. All other use-cases except <a href="#uc-2" class="xref xref-section">UC-2</a>
can be technically solved using XInclude. However XInclude usage is
quite cumbersome. It seems that DocBook specific transclusion
mechanism is needed. Proposal of such mechanism is now discussed by
DocBook TC and it is available for wider review and comments at <a href="https://docbook.org/docs/transclusion/" class="link">https://docbook.org/docs/transclusion/</a>.</p></section></article></main><nav class="bottom"></nav></body></html>